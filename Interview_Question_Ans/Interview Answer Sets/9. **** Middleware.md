
---

## **What is Middleware in Laravel?**

> Middleware acts as a **filter for HTTP requests** entering your application.
> It can **inspect, modify, or block** requests before they reach the controller, and can also **handle responses** before sending them back to the client.

---

## **Why Middleware is Important**

1. Central place to **handle cross-cutting concerns** like authentication, logging, and CORS.
2. Keeps controllers **clean** by separating reusable logic.
3. Can be applied **globally, to a group of routes, or individual routes**.

---

## **Example**

```php
// Middleware: Check if user is admin
class AdminMiddleware {
    public function handle($request, Closure $next) {
        if (!$request->user() || !$request->user()->is_admin) {
            return redirect('/home'); // block access
        }
        return $next($request); // continue
    }
}

// Using middleware in routes
Route::middleware(['auth', 'admin'])->group(function () {
    Route::get('/dashboard', [DashboardController::class, 'index']);
});
```

---

## **Common Use Cases**

* **Authentication & Authorization** (`auth`, `can`)
* **Logging & Auditing** requests
* **CORS / API rate limiting**
* **Input validation or trimming**
* **Maintenance mode or feature flags**

---

### **ASCII Diagram – Middleware Flow**

```
        ┌─────────────────────────────┐
        │      HTTP REQUEST           │
        └───────────────┬─────────────┘
                        │
                        ▼
        ┌─────────────────────────────┐
        │   Global Middleware         │
        │  (runs on every request)    │
        └───────────────┬─────────────┘
                        │
                        ▼
        ┌─────────────────────────────┐
        │  Route Middleware           │
        │ (specific routes/groups)    │
        └───────────────┬─────────────┘
                        │
                        ▼
        ┌─────────────────────────────┐
        │  Controller / Business Logic│
        └───────────────┬─────────────┘
                        │
                        ▼
        ┌─────────────────────────────┐
        │ Middleware (After Response) │
        │ e.g., logging, modifying    │
        └───────────────┬─────────────┘
                        │
                        ▼
        ┌─────────────────────────────┐
        │    HTTP RESPONSE to Client  │
        └─────────────────────────────┘
```

---

### **Short Interview Summary**

> Middleware in Laravel **filters HTTP requests** to handle cross-cutting concerns like auth, logging, or CORS.
> It keeps controllers clean and can be applied **globally, per group, or per route**, making the app more modular and secure.

---
