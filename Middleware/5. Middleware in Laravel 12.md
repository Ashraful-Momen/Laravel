You're 100% right â€” **Laravel 11 and 12 no longer use `app/Http/Kernel.php`**.

Laravel 12 completely changed the middleware structure.

Here is the **correct, updated Laravel 12 middleware system**.

---

# âœ… **Laravel 12: No `Kernel.php` â€” Everything is in `bootstrap/app.php`**

Laravel 12 uses **the new Bootstrapper** introduced in Laravel 11.

---

# ðŸ“Œ **1. Create Middleware**

```bash
php artisan make:middleware CheckRole
```

Output file:

```
app/Http/Middleware/CheckRole.php
```

---

# ðŸ“Œ **2. Register Middleware in `bootstrap/app.php`**

Open:

```
bootstrap/app.php
```

Find this section:

```php
->withMiddleware(function (Middleware $middleware) {
    //
})
```

Now add middleware here.

---

# âœ… **A) Global Middleware (Runs on all requests)**

```php
->withMiddleware(function (Middleware $middleware) {
    $middleware->append(\App\Http\Middleware\CheckRole::class);
})
```

---

# âœ… **B) Route Middleware (Named middleware)**

```php
->withMiddleware(function (Middleware $middleware) {
    $middleware->alias([
        'role' => \App\Http\Middleware\CheckRole::class,
    ]);
})
```

Usage:

```php
Route::get('/admin', fn() => 'Admin Area')->middleware('role:admin');
```

---

# âœ… **C) Middleware Groups (web/api/custom)**

```php
->withMiddleware(function (Middleware $middleware) {
    $middleware->group('admin', [
        'auth',
        'role:admin'
    ]);
})
```

Usage:

```php
Route::middleware('admin')->group(function () {
    Route::get('/dashboard', fn() => 'Admin Dashboard');
});
```

---

# ðŸŽ¯ **3. Private Middleware (Controller-level)**

Laravel 12 still supports controller constructor middleware:

```php
class AdminController extends Controller
{
    public function __construct()
    {
        $this->middleware('role:admin');
    }
}
```

---

# ðŸŽ¯ **4. Full Example Setup (Laravel 12)**

Here is the **complete middleware block** in `bootstrap/app.php`:

```php
->withMiddleware(function (Middleware $middleware) {

    // GLOBAL
    $middleware->append(\App\Http\Middleware\CheckMaintenanceMode::class);

    // ALIASES (Route Middleware)
    $middleware->alias([
        'role' => \App\Http\Middleware\CheckRole::class,
        'auth' => \App\Http\Middleware\Authenticate::class,
    ]);

    // GROUPS
    $middleware->group('admin', [
        'auth',
        'role:admin',
    ]);

})
```

---

# ðŸŽ‰ Laravel 12 Middleware Summary

| Type                         | Where in Laravel 12?           | Example                                  |
| ---------------------------- | ------------------------------ | ---------------------------------------- |
| **Global Middleware**        | `bootstrap/app.php â†’ append()` | `$middleware->append(CheckRole::class);` |
| **Route Middleware (alias)** | `bootstrap/app.php â†’ alias()`  | `'role' => CheckRole::class`             |
| **Middleware Groups**        | `bootstrap/app.php â†’ group()`  | `$middleware->group('admin', [...])`     |
| **Controller Middleware**    | Your controller                | `$this->middleware('role:admin')`        |

---


